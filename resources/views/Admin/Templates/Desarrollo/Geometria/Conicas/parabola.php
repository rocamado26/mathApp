<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins animated fadeInUpBig">
            <div class="ibox-title">
                <h5>Parabola</h5>
            </div>
            <div class="ibox-content">
                <div class="panel-body">
                    <div class="panel-group" id="accordion">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h5 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" class="collapsed">Teoría</a>
                                </h5>
                            </div>
                            <div id="collapseOne" class="panel-collapse collapse" aria-expanded="false" style="height: 0px;">
                                <div class="panel-body">
                                   <div class="row col-lg-12">
                                       <div class="row" style="padding: 5px;">
                                           <div class="col-md-8">
                                               <div class="row">
                                                   Se llama <b>parábola</b> al lugar geométrico de los puntos del plano que equidistan de un punto fijo, llamado foco,
                                                   y de una recta fija llamada directriz.
                                                   <br><br>
                                                   <strong>Ecuaciones de la parábola</strong>
                                                   <br><br>
                                                   <b>* Ecuación canónica</b>
                                                   <br><br>
                                                   Para obtener la ecuación más sencilla de la parábola llamada canónica, colocamos el eje <b>y</b> a lo largo del eje de
                                                   la parábola, con el origen en el vértice.
                                                   <br><br>
                                                   En este caso, el foco <b>F</b> tiene coordenadas <b>(0, p)</b> y la ecuación de la directriz es <b>y = –p.</b>
                                                   Por la fórmula de la distancia, un punto <b>P(x, y)</b> está en la gráfca de la parábola si <b>d(P, F) = d(P, D)</b>; es decir, si:
                                                   <br><br>
                                                   <center>
                                                       <img src="img/iconos/geometria/conicas/parabola/distancia.png" style="width: 50%">
                                                       <br><br>
                                                       Elevando las raices al cuadrado
                                                       <br><br>
                                                       <img src="img/iconos/geometria/conicas/parabola/cuadrado.png" style="width: 50%">
                                                   </center>
                                                   <br><br>
                                                   Y según el signo esta puede ser:
                                                   <br><br>
                                                   <center>
                                                       <div class="col-sm-6">
                                                           <img src="img/iconos/geometria/conicas/parabola/derecha.png" style="width: 60%">
                                                       </div>
                                                       <div class="col-sm-6">
                                                           <img src="img/iconos/geometria/conicas/parabola/arriba.png" style="width: 60%">
                                                       </div>
                                                       <div class="col-sm-6">
                                                           <img src="img/iconos/geometria/conicas/parabola/izquierda.png" style="width: 60%">
                                                       </div>
                                                       <div class="col-sm-6">
                                                           <img src="img/iconos/geometria/conicas/parabola/abajo.png" style="width: 60%">
                                                       </div>
                                                   </center>
                                               </div>
                                           </div>
                                           <div class="col-md-4">
                                               <div class="panel panel-warning">
                                                   <div class="panel-heading">
                                                       <center><img src="img/iconos/generales/target.png">&nbsp;&nbsp;<font size="4"><i><b>Punto de apoyo</b></i></font></center>
                                                   </div>
                                                   <div class="panel-body">
                                                       <div class="row">
                                                           <div class="col-md-12">
                                                               <strong>Elementos de una parábola</strong><br><br>
                                                               <b>* Directriz</b>: es la recta sobre la cual, si medimos su distancia hasta un punto cualquiera
                                                               de la parábola, esta debe ser igual a la distancia de este mismo punto al foco
                                                               <br><br>
                                                               <b>* Eje Focal</b>: El eje focal es la recta perpendicular a la directriz que pasa por el foco.
                                                               <br><br>
                                                               <b>* Vertice</b>: Es el punto en el cual la parábola corta el eje focal.
                                                               <br><br>
                                                               <b>* Lado recto</b>: Es un segmento paralelo a la directriz, que pasa por el foco y es perpendicular
                                                               al eje focal y sus extremos son puntos de la parabola (A,B)
                                                               <br><br>
                                                               <b>* Parámetro</b>: La distancia entre el vertice y la directriz, es la misma entre el vertice y el foco de una parábola,
                                                               esta recibe el nombre de parámetro de la parábola (suele denotarse por p).
                                                               <br><br>
                                                               <img src="img/iconos/geometria/conicas/parabola/elementosParabola.jpg" style="width: 100%">
                                                           </div>
                                                       </div>
                                                   </div>
                                               </div>
                                           </div>
                                       </div>
                                       <div class="row" style="padding: 5px;">
                                            <b>* Ecuación ordinaria</b>
                                           <br><br>
                                           Si las coordenadas del vértice se convierten en (h, k)
                                           en lugar de (0, 0), la ecuación de la parábola vertical
                                           x<sup>2</sup> = 4py, se convierte en (x – h)<sup>2</sup> = 4p (y – k). De igual
                                           forma, la ecuación de la parábola horizontal (y<sup>2</sup> = 4px) se convierte
                                           en (y – k)<sup>2</sup> = 4p(x – h)
                                           <br><br>
                                           Estas formas se conocen como ecuación ordinaria de la
                                           parábola.
                                           <br><br>
                                           Veamos un ejemplo:
                                           <br><br>
                                           Determina la ecuación de la parábola si el foco es <b>F (6, 8)</b> y la directriz <b>y – 2 = 0.</b>
                                           <br><br>
                                           La ecuación de la directriz es <b>y – 2 = 0</b>, si despejas, y = 2.
                                           <br><br>
                                           El punto medio entre y = 2, y el valor 8 de la ordenada del foco, es:
                                           <br><br>
                                           <table border="0">
                                               <tr>
                                                   <td style="border-bottom: 1px solid black;">8 + 2</td>
                                                   <td rowspan="2"> = 5</td>
                                               </tr>
                                               <tr>
                                                   <td><center>2</center></td>
                                               </tr>
                                           </table>
                                           <br><br>
                                           este valor representa la ordenada del vértice. La abscisa es 6
                                           <br><br>
                                           Graficando tenemos que:
                                           <br><br>
                                           <center>
                                               <div class="col-sm-4">
                                                   <img src="img/iconos/geometria/conicas/parabola/ordinaria.png" style="width: 100%">
                                               </div>
                                           </center>
                                       </div>
                                   </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" class="collapsed" aria-expanded="false">Prática</a>
                                    <div class="nav navbar-top-links navbar-right ">
                                        <div class="col-xs-3">
                                            <button type="button" onclick="ayuda_grafica()" class="btn btn-primary btn-xs"><i class="fa fa-question-circle"></i></button>
                                        </div>
                                    </div>
                                </h4>
                            </div>
                            <div id="collapseTwo" class="panel-collapse collapse" aria-expanded="false">
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="alert alert-info" id="area-grafica">Área para graficar<br>
                                                <b>x<sup>2</sup> = 4py</b>
                                            </div><br>
                                        </div>
                                        <div class="col-md-4">
                                            <div id="mostrarMensaje" class="alert alert-info">
                                                Área para modificar la función:<br><b>x<sup>2</sup> = 4py</b>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-8" align="center" id="graf">
                                            <div id="grafica-seno" class="jxgbox" style="width: 600px; height: 400px;"></div>
                                        </div>
                                        <div class="col-md-4" id="config">
                                            <div class="alert alert-warning">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Función</label>
                                                        <select id="funcion" class="form-control m-b" onclick="cambiarSelect()">
                                                            <option value="1">Cánonica</option>
                                                            <option value="2">Ordinaria</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>F(p):</label>
                                                        <input type="number" class="form-control" id="amplitud">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>F(q):</label>
                                                        <input type="number" class="form-control" id="b">
                                                    </div>                                                
                                                </div><br>
                                                <div id="ordinaria" class="row" style="display: none;">
                                                    <div class="col-md-12">
                                                        <label>Directriz:</label>
                                                        <br>
                                                        <div class="col-sm-4">
                                                            <button id="botonX" style="width: 90%" type="button" class="btn btn-default" onclick="changeButton()">X</button>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <button id="botonMas" style="width: 90%" type="button" class="btn btn-default" onclick="changeButtonM()">+</button>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <input type="number" class="form-control" id="c">
                                                        </div>
                                                    </div><br>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-4"></div>
                                                    <div class="col-md-4">
                                                        <button type="button" class="btn btn-primary btn-rounded" onclick="llamarGrafica()"><i class="fa fa-check"></i>&nbsp;Comprobar</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    llamarGrafica();
    var buttonX = true;
    var buttonM = true;
    var brd1 = JXG.JSXGraph.initBoard('grafica-seno', {boundingbox: [-10, 10, 10, -10], axis:true});
    var A = brd1.create('point', [0,0], {visible:false});

    function changeButton(){
        if(!buttonX){
            $("#botonX").html("X");
            buttonX=true;
        }
        else{
            $("#botonX").html("Y");
            buttonX=false;
        }
    }
    function changeButtonM(){
        if(!buttonM){
            $("#botonMas").html("+");
            buttonM=true;
        }
        else{
            $("#botonMas").html("-");
            buttonM=false;
        }
    }
    function cambiarSelect(){
        switch($('#funcion').val()){
            case '1':{
                $('#mostrarMensaje').html('Área para modificar la función:<br><b>x<sup>2</sup> = 4py</b>');
                $('#area-grafica').html('Área para graficar:<br><b>x<sup>2</sup> = 4py</b>');
                $("#ordinaria").fadeOut(0);
                document.getElementById("amplitud").value="";
                document.getElementById("b").value="";
                document.getElementById("c").value="";
                var brd1 = JXG.JSXGraph.initBoard('grafica-seno', {boundingbox: [-10, 10, 10, -10], axis:true});
                var A = brd1.create('point', [0,0], {visible:false});
            }break;
            case '2':{
                $('#mostrarMensaje').html('Área para modificar la función:<br><b>(x – h)<sup>2</sup> = 4p (y – k)</b>');
                $('#area-grafica').html('Área para graficar:<br><b>(x – h)<sup>2</sup> = 4p (y – k)</b>');
                $("#ordinaria").fadeIn(0);
                document.getElementById("amplitud").value="";
                document.getElementById("b").value="";
                document.getElementById("c").value="";
                var brd1 = JXG.JSXGraph.initBoard('grafica-seno', {boundingbox: [-10, 10, 10, -10], axis:true});
                var A = brd1.create('point', [0,0], {visible:false});
            }break;
        }
    }

   function llamarGrafica(){
       var p = parseInt(document.getElementById("amplitud").value);
       var q = parseInt(document.getElementById("b").value);
       var d = parseInt(document.getElementById("c").value);
       var x = 4 * p;
       var y = 4 * q;
       switch($('#funcion').val()){
           case '1':{
               if(p==0){
                   if(q!=0){
                       var brd1 = JXG.JSXGraph.initBoard('grafica-seno', {boundingbox: [-10, 10, 10, -10], axis:true});
                       if(q>0){
                           $('#mostrarMensaje').html('Área para modificar la función:<br><b>x<sup>2</sup> = 4py</b>');
                           $('#area-grafica').html('Área para graficar:<br><b>x<sup>2</sup> = '+y+'p</b>');
                       }
                        else{
                           $('#mostrarMensaje').html('Área para modificar la función:<br><b>x<sup>2</sup> = -4py</b>');
                           $('#area-grafica').html('Área para graficar:<br><b>x<sup>2</sup> = '+y+'p</b>');
                       }
                       var A = brd1.create('point', [q,q * -1], {visible:false});
                       var B = brd1.create('point', [q * -1,q * -1],{visible:false});
                       var l = brd1.create('line', [A,B], {visible:false});
                       var C = brd1.create('point', [0,q]);
                       var el = brd1.create('parabola',[C,l]);
                   }
                   else{
                       toastr.error("Uno de los 2 valores debe ser 0","Espera!");
                   }
               }
               if(q==0){
                   if(p!=0){
                       if(p>0){
                           $('#mostrarMensaje').html('Área para modificar la función:<br><b>y<sup>2</sup> = 4px</b>');
                           $('#area-grafica').html('Área para graficar:<br><b>y<sup>2</sup> = '+x+'p</b>');
                       }
                       else{
                           $('#mostrarMensaje').html('Área para modificar la función:<br><b>y<sup>2</sup> = -4px</b>');
                           $('#area-grafica').html('Área para graficar:<br><b>y<sup>2</sup> = '+x+'p</b>');
                       }
                       var brd1 = JXG.JSXGraph.initBoard('grafica-seno', {boundingbox: [-10, 10, 10, -10], axis:true});
                       var A = brd1.create('point', [p * -1,p], {visible:false});
                       var B = brd1.create('point', [p* -1,p * -1],{visible:false});
                       var l = brd1.create('line', [A,B], {visible:false});
                       var C = brd1.create('point', [p,0]);
                       var el = brd1.create('parabola',[C,l]);
                   }
               }
           }break;
           case '2':{
               /*$('#mostrarMensaje').html('Área para modificar la función:<br><b>(x – h)<sup>2</sup> = 4p (y – k)</b>');
               $('#area-grafica').html('Área para graficar:<br><b>(x – h)<sup>2</sup> = 4p (y – k)</b>');*/
               var brd1 = JXG.JSXGraph.initBoard('grafica-seno', {boundingbox: [-10, 10, 10, -10], axis:true});
               console.log(buttonX,buttonM);
               if(buttonX){
                    //es X
                    if(!buttonM){
                        var valor = (p + d)/2;
                        var x2 = (p - valor) * 4;
                        $('#mostrarMensaje').html('Área para modificar la función:<br><b>(y – k)<sup>2</sup> = 4p (x – h)</b>');
                        $('#area-grafica').html('Área para graficar:<br><b>(y – '+q+')<sup>2</sup> = '+x2+' (x – '+valor+')</b>');
                        var A = brd1.create('point', [d,q], {visible:false});
                        var B = brd1.create('point', [d,q * -1],{visible:false});
                    }
                    else{
                        var valor = (p + (d * -1))/2;
                        var x2 = (p - valor) * 4;
                        $('#mostrarMensaje').html('Área para modificar la función:<br><b>(y + k)<sup>2</sup> = 4p (x + h)</b>');
                        $('#area-grafica').html('Área para graficar:<br><b>(x + '+q+')<sup>2</sup> = '+x2+' (y + '+valor+')</b>');
                        var A = brd1.create('point', [d * -1,q], {visible:false});
                        var B = brd1.create('point', [d * -1,q * -1],{visible:false});
                    }
                    var l = brd1.create('line', [A,B]);
                    var C = brd1.create('point', [p,q]);
                    var el = brd1.create('parabola',[C,l]);
               }
                else{
                   if(!buttonM){
                       var valor = (q + d)/2;
                       var x2 = (q - valor) * 4;
                       $('#mostrarMensaje').html('Área para modificar la función:<br><b>(x – h)<sup>2</sup> = 4p (y – k)</b>');
                       $('#area-grafica').html('Área para graficar:<br><b>(x – '+p+')<sup>2</sup> = '+x2+' (y – '+valor+')</b>');
                       var A = brd1.create('point', [p,d], {visible:false});
                       var B = brd1.create('point', [p * -1,d],{visible:false});
                   }
                   else{
                       var valor = (q + d)/2;
                       var x2 = (p - valor) * 4;
                       $('#mostrarMensaje').html('Área para modificar la función:<br><b>(x + h)<sup>2</sup> = 4p (y + k)</b>');
                       $('#area-grafica').html('Área para graficar:<br><b>(x + '+p+')<sup>2</sup> = '+x2+' (y + '+valor+')</b>');
                       var A = brd1.create('point', [p,d * -1], {visible:false});
                       var B = brd1.create('point', [p * -1,d * -1],{visible:false});
                   }
                   var l = brd1.create('line', [A,B]);
                   var C = brd1.create('point', [p,q]);
                   var el = brd1.create('parabola',[C,l]);
                }

           }break;
       }

   }

   function ayuda_grafica(){

    var tour = new Tour({
    steps: [{
        element: "#config",
        title: "Paso 1",
        content: "Selecciona lel tipo de ecuación que desees graficar, luego podrás modificar los valores de la formula e identifica el efecto que tendrá la gráfica. Dar clic en el botón “Comprobar”",
        placement: "top",
        backdrop: true,
        backdropContainer: '#contenido',
        onShown: function (tour){
            $('body').addClass('tour-open')
        },
        onHidden: function (tour){
            $('body').removeClass('tour-close')
        }
    },
    {
        element: "#graf",
        title: "Paso 2",
        content: "Área donde visualizaras el grafico de la ecuación seleccionada.",
        placement: "top",
        backdrop: true,
        backdropContainer: '#contenido',
        onShown: function (tour){
            $('body').addClass('tour-open')
        },
        onHidden: function (tour){
            $('body').removeClass('tour-close')
        }
    }
    ]});
    // Initialize the tour
    tour.init();
    tour.restart();
    // Start the tour
    tour.start();

    }
</script>